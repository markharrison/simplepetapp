@using MyPetVenues.Services
@inject IThemeService ThemeService
@inject NavigationManager NavigationManager

<header class="header">
    <a href="#main-content" class="skip-link">Skip to content</a>
    
    <div class="header-container">
        <a href="/" class="logo">
            <span class="logo-icon">ðŸ¾</span>
            <span class="logo-text">MyPetVenues</span>
        </a>
        
        <nav class="nav" aria-label="Main navigation">
            <a href="/" class="nav-link @(IsActive("/") ? "active" : "")">Home</a>
            <a href="/venues" class="nav-link @(IsActive("/venues") ? "active" : "")">Venues</a>
            <a href="/booking" class="nav-link @(IsActive("/booking") ? "active" : "")">Book Now</a>
            <a href="/profile" class="nav-link @(IsActive("/profile") ? "active" : "")">Profile</a>
        </nav>
        
        <button class="theme-toggle" @onclick="ThemeService.ToggleTheme" aria-label="Toggle theme">
            @if (ThemeService.IsDarkMode)
            {
                <span>â˜€ï¸</span>
            }
            else
            {
                <span>ðŸŒ™</span>
            }
        </button>
        
        <button class="mobile-menu-toggle" @onclick="ToggleMobileMenu" aria-label="Toggle menu">
            <span class="hamburger"></span>
        </button>
    </div>
    
    @if (isMobileMenuOpen)
    {
        <div class="mobile-menu">
            <a href="/" class="mobile-nav-link" @onclick="CloseMobileMenu">Home</a>
            <a href="/venues" class="mobile-nav-link" @onclick="CloseMobileMenu">Venues</a>
            <a href="/booking" class="mobile-nav-link" @onclick="CloseMobileMenu">Book Now</a>
            <a href="/profile" class="mobile-nav-link" @onclick="CloseMobileMenu">Profile</a>
        </div>
    }
</header>

@code {
    private bool isMobileMenuOpen;
    
    private bool IsActive(string path)
    {
        return NavigationManager.Uri.EndsWith(path) || 
               (path != "/" && NavigationManager.Uri.Contains(path));
    }
    
    private void ToggleMobileMenu()
    {
        isMobileMenuOpen = !isMobileMenuOpen;
    }
    
    private void CloseMobileMenu()
    {
        isMobileMenuOpen = false;
    }
}
